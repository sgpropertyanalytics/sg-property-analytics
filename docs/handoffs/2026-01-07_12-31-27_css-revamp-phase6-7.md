---
date: 2026-01-07T12:31:27+08:00
branch: fix/landing-map-size
commit: 9682a500
status: in_progress
---

# Handoff: Dashboard CSS Revamp - Phases 6-7 In Progress

## Task(s)

| Task | Status | Notes |
|------|--------|-------|
| P0: Populate tailwind.config.js | âœ… Complete | Added mono, brand, status, region, supply, card colors |
| P0: Remove dead CSS from index.css | âœ… Complete | Removed ~58 lines of unused classes |
| P0: Update chartOptions.js | âœ… Complete | Now imports MONO colors instead of Slate |
| Phase 6: Chart cards HUD styling | âœ… Complete | PriceRangeMatrix, ScopeSummaryCards updated |
| Phase 7: Filter components | ðŸ”„ In Progress | FilterBar, PowerBIFilterSidebar done; TimeGranularityToggle partial |
| Phase 8: Chart color consolidation | â³ Planned | Import colors from colors.js |
| Phase 9: Map/tooltip components | â³ Planned | Hard edges, weapon-shadow |
| Phase 10: JetBrains Mono font | â³ Planned | npm install @fontsource/jetbrains-mono |
| Phase 11: ESLint enforcement | â³ Planned | Tighten no-raw-hex-color rule |

## Critical References

These documents MUST be read before continuing:
- `REPO_MAP.md` - Navigation guide + historical incidents
- `CLAUDE.md` - Core invariants, especially Rule #3 (Single Source of Truth)
- `/Users/changyuesin/.claude/plans/idempotent-humming-kay.md` - Full CSS review findings
- `docs/handoffs/2026-01-06_23-14-02_white-ops-design-system.md` - Original design system handoff
- `docs/handoffs/2026-01-07_dashboard-ui-makeover.md` - Dashboard makeover handoff

## Recent Changes

```
frontend/tailwind.config.js - Added all design system colors (mono, brand, status, region, supply, card)
frontend/src/index.css:605-626 - Removed unused grayscale depth utilities
frontend/src/index.css:681-703 - Removed unused card-hover-lift, card-hover-glow
frontend/src/index.css:732-742 - Removed unused input-focus-glow
frontend/src/constants/chartOptions.js:1 - Added import { MONO } from './colors'
frontend/src/constants/chartOptions.js:44-48 - Changed Slate colors to MONO.ink, MONO.mid
frontend/src/components/powerbi/PriceRangeMatrix.jsx:92-106 - Applied weapon-card, hud-corner, terminal-header
frontend/src/components/powerbi/ScopeSummaryCards.jsx:120-140 - Applied weapon aesthetic, replaced hardcoded hex
frontend/src/components/powerbi/FilterBar.jsx:72 - Replaced hex with brand-blue tokens
frontend/src/components/powerbi/PowerBIFilterSidebar.jsx - Bulk replaced all hardcoded hex with brand tokens
frontend/src/components/powerbi/TimeGranularityToggle.jsx:65-68, 82, 93-96 - Partial hex replacement
```

## Learnings

1. **991 Hardcoded Hex Values Across Codebase**
   - What: Despite centralized colors.js, components still use `text-[#213448]` etc.
   - Why it matters: Design system isn't enforced; updates require find/replace
   - File reference: Throughout `/frontend/src/components/powerbi/`

2. **Tailwind v4 Uses CSS-First Configuration**
   - What: Colors defined in `@theme` CSS block, but config.js needed for IDE autocomplete
   - Why it matters: Added colors to tailwind.config.js to enable autocomplete
   - File reference: `frontend/tailwind.config.js:7-50`

3. **Two Parallel Design Tracks**
   - What: Dashboard uses "White Ops" aesthetic; LandingV3 uses "Bloomberg Terminal" aesthetic
   - Why it matters: LandingV3.jsx is EXCLUDED from this transformation
   - File reference: User decision in `docs/handoffs/2026-01-06_23-14-02_white-ops-design-system.md`

4. **command-bar-focus Class Is Used**
   - What: Unlike other emerald glow classes, `command-bar-focus` is used in LandingV3.jsx
   - Why it matters: Don't delete it when cleaning up dead CSS
   - File reference: `frontend/src/pages/LandingV3.jsx`

## Artifacts

**Modified:**
- `frontend/tailwind.config.js` - Added design system colors for IDE autocomplete
- `frontend/src/index.css` - Removed ~58 lines of dead CSS
- `frontend/src/constants/chartOptions.js` - Uses MONO colors now
- `frontend/src/components/powerbi/PriceRangeMatrix.jsx` - Weapon aesthetic applied
- `frontend/src/components/powerbi/ScopeSummaryCards.jsx` - Weapon aesthetic + tokens
- `frontend/src/components/powerbi/FilterBar.jsx` - Brand tokens
- `frontend/src/components/powerbi/PowerBIFilterSidebar.jsx` - All hex replaced with brand tokens
- `frontend/src/components/powerbi/TimeGranularityToggle.jsx` - Partial token replacement

## Action Items & Next Steps

Priority order for the next agent:

1. **Complete TimeGranularityToggle.jsx token replacement**
   - [ ] Replace remaining `#213448` with `brand-navy`
   - [ ] Replace `#94B4C1` with `brand-sky`
   - Blocked by: Nothing

2. **Phase 8: Chart Color Consolidation**
   - [ ] Find components with local COLORS constants
   - [ ] Replace with imports from `constants/colors.js`
   - [ ] Key files: ExitRiskDashboard.jsx, BudgetActivityHeatmap.jsx
   - Blocked by: Nothing

3. **Phase 9: Map/Tooltip Components**
   - [ ] DealCheckerMap.jsx - Apply weapon aesthetic
   - [ ] Update tooltip styling to use weapon-shadow
   - Blocked by: Nothing

4. **Phase 10: JetBrains Mono Font**
   - [ ] Run `npm install @fontsource/jetbrains-mono`
   - [ ] Add imports to index.css
   - Blocked by: Nothing

5. **Phase 11: ESLint Enforcement**
   - [ ] Edit `eslint-plugin-design/rules/no-raw-hex-color.js`
   - [ ] Remove whitelisted directories
   - Depends on: Phases 8-10 complete

## Blockers & Open Questions

- **None currently** - All decisions made, ready to continue implementation

## Context for Resume

Key things the next agent should know:

1. **Weapon aesthetic means**: hard edges (rounded-none), instant transitions (transition-none), structural borders, monospace headers, HUD corners
2. **Color tokens to use**:
   - `brand-navy` (#213448) - CCR, primary
   - `brand-blue` (#547792) - RCR, secondary
   - `brand-sky` (#94B4C1) - OCR, tertiary
   - `brand-sand` (#EAE0CF) - Backgrounds
   - `mono-ink` (#000000) - Pure black
   - `mono-mid` (#525252) - Body text
   - `mono-canvas` (#FAFAFA) - Background
3. **LandingV3.jsx is EXCLUDED** - It has its own design direction
4. **Lint passes with 0 errors, 197 warnings** - All pre-existing, not from these changes

## Commands to Run

```bash
# Verify current state
cd /Users/changyuesin/Desktop/sgpropertytrend/frontend
git status
git diff --stat

# Run verification
npm run lint 2>&1 | tail -5
npm run typecheck

# Continue with TimeGranularityToggle cleanup
grep -n "#[0-9a-fA-F]\{6\}" src/components/powerbi/TimeGranularityToggle.jsx

# Check remaining hex colors across filter components
grep -rn "#[0-9a-fA-F]\{6\}" src/components/powerbi/FilterBar.jsx src/components/powerbi/PowerBIFilterSidebar.jsx src/components/powerbi/TimeGranularityToggle.jsx
```
